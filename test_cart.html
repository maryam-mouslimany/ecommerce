<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Cart LocalStorage</title>
</head>
<body>
    <h1>Test Cart LocalStorage</h1>
    <button onclick="addSampleProduct()">Add Sample Product</button>
    <button onclick="viewCart()">View Cart</button>
    <button onclick="clearCart()">Clear Cart</button>
    <div id="cartDisplay"></div>

    <script>
        // Simulate the cart functions from your service
        const addItemToLocalCart = (product) => {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const existingItem = cart.find(item => item.id === product.id);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ ...product, quantity: 1, addedAt: new Date().toISOString() });
            }
            localStorage.setItem('cart', JSON.stringify(cart));
            console.log('Cart updated:', cart);
        };

        const getLocalCart = () => {
            return JSON.parse(localStorage.getItem('cart') || '[]');
        };

        const clearLocalCart = () => {
            localStorage.removeItem('cart');
        };

        // Test functions
        function addSampleProduct() {
            const product = {
                id: Math.floor(Math.random() * 1000),
                title: `Sample Product ${Math.floor(Math.random() * 100)}`,
                price: `$${(Math.random() * 100).toFixed(2)}`,
                image: 'sample-image.jpg'
            };
            addItemToLocalCart(product);
            alert('Product added to cart!');
            viewCart();
        }

        function viewCart() {
            const cart = getLocalCart();
            const cartDisplay = document.getElementById('cartDisplay');
            if (cart.length === 0) {
                cartDisplay.innerHTML = '<p>Cart is empty</p>';
            } else {
                cartDisplay.innerHTML = '<h3>Cart Contents:</h3>' + 
                    cart.map(item => 
                        `<div>
                            <strong>${item.title}</strong> - ${item.price} (Qty: ${item.quantity})
                            <br>Added: ${new Date(item.addedAt).toLocaleString()}
                        </div><br>`
                    ).join('');
            }
        }

        function clearCart() {
            clearLocalCart();
            alert('Cart cleared!');
            viewCart();
        }

        // Load cart on page load
        window.onload = viewCart;
    </script>
</body>
</html>
